{% extends 'base.html' %}

{% block content %}

{% if current_user.is_anonymous%}
<h1>Hi anonymous. Please login to edit.</h1>    
{% else %}
<h1>Hi {{  current_user.username  }}!

    <table class="table">
        <thead>
            <tr>
                <th>Username</th>
                <th>email</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Admin</th>
                <th>Updated_when</th>
                <th>Updated by</th>

            </tr>
        </thead>

        <tbody>
            {% for users in users %}
            <tr>
                <td>{{ users.username }}</a></td>
                <td>{{ users.email }}</a></td>
                <td>{{ users.first_name}}</a></td>
                <td>{{ users.last_name }}</td>
                <td>{{ users.admin}}</td>
                <td>{{ users.updated_when}}</td>
                <td>{{ users.updated_by}}</td>
                {% if current_user.admin == 1 %}                
                    <td class="text-right"><a class="btn btn-danger btn-sm" href="/delete/users/{{ users.id }}" role="form">Delete</a></td>
                    <td class="text-left"><a class="btn btn-danger btn-sm" href="/update/users/{{ users.id }}" role="form">Update</a></td>
                {% endif %}                

            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endif %}

<form action="/admin" method="POST">
    <div class="form-row">
        <div class="col-sm-10 my-1">
            
            <input type="text" class="form-control" name="username" id="username" placeholder="Enter username">
            <input type="text" class="form-control" name="email" id="email" placeholder="Enter email" >
            <input type="text" class="form-control" name="first_name" id="first_name" placeholder="Enter first name" >
            <input type="text" class="form-control" name="last_name" id="last_name" placeholder="Enter last name" >
            <input type="text" class="form-control" name="admin" id="admin" placeholder="Is admin? 1 for yes or 0 for no" >
            <input type="password" class="form-control" name="password" id="password" placeholder="Enter Password" >
            
            

        </div>
        <div class="col-sm-2 my-1">
            <button type="submit" class="btn btn-primary btn-block">Add</button>
        </div>
    </div>
</form>
</div>
{% endblock content %}